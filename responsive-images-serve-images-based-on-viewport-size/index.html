<!DOCTYPE html> <html lang=ID> <head> <meta charset=utf-8> <meta content="IE=edge" http-equiv=X-UA-Compatible> <meta content="width=device-width, initial-scale=1.0" name=viewport> <title> Jurnal Aris FM: Responsive Images: Serve Images Based on Viewport Size </title> <style>/*! normalize-scss | MIT/GPLv2 License | bit.ly/normalize-scss */@import url(https://fonts.googleapis.com/css?family=Roboto:400,400italic,300,300italic,700,700italic);html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden]{display:none}template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}dfn{font-style:italic}h1{font-size:2em;margin:0.75em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1.5em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace, monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto}input[type="search"]{-webkit-appearance:textfield;box-sizing:content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid #c0c0c0;margin:0 2px;padding:0.35em 0.625em 0.75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:bold}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}blockquote cite,body{font-family:"Roboto", Helvetica, Arial, sans-serif}code,kbd,pre,samp{font-family:Consolas, "Liberation Mono", Menlo, Courier, monospace}.post__entry:before,.page-nav__inner:before{content:"";display:table}.post__entry:after,.page-nav__inner:after{clear:both;content:"";display:table}p{font-size:1rem;line-height:1.75;margin:0 0 1rem}p:last-child{margin-bottom:0}a{color:#444;text-decoration:none}a:hover,a:active{color:#e51c23}small{font-size:85%}em em{font-style:normal}h1{margin-top:1rem;margin-bottom:0.5rem;font-size:1.375rem;line-height:1.5rem}h2{margin-top:1rem;margin-bottom:1rem;font-size:1.25rem;line-height:1.5rem}ul,ol{margin-top:0;margin-bottom:1rem}ul ul,ul ol,ol ul,ol ol{margin-bottom:0}dl{margin-top:0;margin-bottom:1rem}dt,dd{line-height:2rem}dt{font-weight:bold}dd{margin-left:0}blockquote{margin:2rem 0;padding:0 1.5rem}blockquote p{font-size:1.25rem;line-height:2rem;margin-bottom:1rem}blockquote p:last-child{margin-bottom:0}blockquote p>span{font-weight:300;position:relative;opacity:.8}blockquote p>span:before,blockquote p>span:after{font-style:normal;font-size:175%;position:absolute}blockquote p>span:before{content:'\201C';left:-1rem}blockquote p>span:after{content:'\201D';right:-1rem;bottom:-1rem}blockquote cite{font-size:0.75rem;font-style:normal;line-height:2rem}blockquote cite:before{content:'\2014 \00A0'}code{background-color:#f6f6f6;padding:2px 4px;font-size:85%;font-weight:normal;white-space:nowrap;border-radius:3px;line-height:1.5;margin-right:2px}pre{border:1px solid #eee;background-color:#fff;display:block;padding:0.5rem;margin:0 0 1rem;font-size:0.75rem;line-height:1.25;border-radius:3px;white-space:pre;overflow-x:auto;word-break:inherit;word-wrap:inherit}pre code{padding:0;font-size:inherit;color:inherit;white-space:inherit;background-color:transparent;border-radius:0}*,*:before,*:after{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}html{font-size:100%;line-height:2}body{background:#fff;color:#444;text-rendering:optimizeLegibility;-webkit-font-smoothing:subpixel-antialiased}img{max-width:100%}.main{padding-left:1rem;padding-right:1rem}.top{background-color:#f9f9f9;border-bottom:1px solid #eee;padding:1rem 0;text-align:center}.top__branding{font-size:1.75rem;font-weight:bold;line-height:1;text-transform:uppercase}.top__tagline{line-height:1.25}.post-cover{background-position:center;background-size:cover;background-repeat:no-repeat;height:12.5rem;margin-bottom:2rem}.post{max-width:47.5rem;margin:1rem auto}.post--index{border-bottom:1px solid #eee}.post__meta{color:#979797;font-size:0.875rem;text-align:center;margin-bottom:0.5rem}.post__meta-separator{margin:0 0.25rem}.post__meta a{color:#979797}.post__title{margin-top:0;margin-bottom:.25em;text-align:center}.post__title-extlink{font-weight:300}.post__title svg{fill:#e51c23;width:1rem;height:auto;display:inline-block}.post__entry{padding-bottom:1rem}.post__entry h2{margin-top:2rem}.post__entry a{color:#e51c23}.post__entry a:hover,.post__entry a:active{color:#e51c23}.post__entry a:hover{text-decoration:underline}.post__img{color:#979797;margin:1rem -1rem;max-width:47.5rem;text-align:center}.post__img p{margin-bottom:0}.post__img img{width:100%}.post__img figcaption{font-size:0.875rem}.post__nav{border-top:2px solid #eee;border-bottom:2px solid #eee;color:#979797;padding-top:1rem;padding-bottom:1rem}.post__nav-post{display:block;font-weight:bold;font-size:1.25rem;line-height:1.5rem}.post__comments{border-bottom:2px solid #eee;margin-bottom:1rem;padding-top:1rem;padding-bottom:1rem}.page-nav{font-size:0.875rem;font-weight:bold;margin:0 -1rem 1rem}.page-nav__inner{max-width:47.5rem;margin:auto}.page-nav__link--next{float:left}.page-nav__link--next{float:right}.page-nav span{display:none}.archive-title{background-color:#f9f9f9;border-bottom:1px solid #eee;color:#979797;font-weight:bold;padding:0.5rem 0;text-align:center}.colophon{background-color:#f9f9f9;border-top:1px solid #eee;font-size:0.75rem;padding:1rem;text-align:center}.colophon span{display:block}.colophon__link{font-weight:bold}@media (min-width: 48rem){p{font-size:1.0625rem;line-height:1.88235}h1{font-size:1.875rem;margin-bottom:1.5rem;line-height:2rem}h2{font-size:1.5rem;line-height:2rem}ul,ol{margin-bottom:2rem}blockquote cite{font-size:0.85rem}.main{margin:2rem auto 0;padding-left:2rem;padding-right:2rem}.top{padding:2rem 0}.top__branding{font-size:2.25rem}.post-cover{height:31.25rem}.post{margin:2rem auto}.post__title svg{width:1.25rem}.post__entry{padding-bottom:2rem}.post__img{margin-left:auto;margin-right:auto}.post__nav{padding-top:2rem;padding-bottom:2rem}.post__nav-post{font-size:1.5rem}.post__comments{margin-bottom:2rem;padding-top:2rem;padding-bottom:2rem}.page-nav{font-size:1rem;margin:0 -2rem 2rem}.page-nav span{display:inline}.archive-title{padding:0.75rem 0}.colophon{font-size:0.85rem;padding-top:2rem;padding-bottom:2rem}.colophon span{display:inline}}@media (min-width: 61.25rem){blockquote p{font-size:1.75rem;line-height:2.5rem}}
</style> <link href="../assets/img/favicon.ico" rel=icon type="image/ico"/> </head> <body> <div class=top> <a class=top__branding href="/">Jurnal Aris FM</a> <p class=top__tagline>Opini, kode dan semacamnya</p> </div> <main class=main> <article class=post> <h1 class=post__title> Responsive Images: Serve Images Based on Viewport Size </h1> <div class=post__meta> <time class=post__time datetime=2015-06-22>22 June 2015</time> <span class=post__tags> &bull; <a href="/topik/web-development/">Web Development</a> </span> </div> <div class=post__entry><p>Belakangan ini saya sedang belajar untuk optimisasi performa situs, terutama di <em>mobile</em>. Hal ini didasari dari pengamatan pribadi saya, banyak sekali situs yang masih belum optimal di <em>mobile</em>, terutama <em>loading speed</em>-nya (baca: lemot). Apalagi ditambah dengan koneksi internet seluler di Indonesia yang masih <em>bosok</em>, sinyal boleh H+ tapi speednya <em>Hajingan+</em>.</p> <p>Kali ini saya akan sedikit berbagi tentang optimisasi <em>images</em>. Kenapa <em>images</em>? <em>images</em> adalah salah satu elemen yang paling banyak memakan <em>bandwith</em> karena ukuran berkasnya yang relatif besar. Seperti dijelaskan oleh Ilya Grigorik di <a href="https://developers.google.com/web/fundamentals/?hl=en">Google Web Fundamentals</a>:</p> <blockquote> <p><span>Images often account for most of the downloaded bytes on a web page and also often occupy a significant amount of visual space.</span></p> </blockquote> <p>Jadi optimisasi <em>images</em> itu wajib hukumnya untuk sebuah situs, apalagi jika situs itu memang menampilkan banyak <em>images</em>.</p> <p></p> <h2 id=tentang-responsive-images>Tentang <em>Responsive Images</em></h2> <p><em>Responsive Images</em> adalah sebuah teknik untuk menampilkan <em>image</em> sesuai ukuran <em>viewport</em>. Jadi situs menyediakan <em>image</em> dengan beberapa ukuran yang berbeda, lalu menampilkan <em>image</em> yang sesuai dengan ukuran <em>viewport</em> dari <em>device</em> yang mengaksesnya. Tujuannya adalah agar <em>image</em> yang ditampilkan ke user lebih optimal, baik dari segi kualitas maupun ukuran file.</p> <p>Saya akan memberikan sedikit contoh sederhana tentang cara kerja <em>responsive images</em>. Misalnya 3 orang <em>user</em> membuka sebuah situs dengan gadget yang berbeda-beda:</p> <ul> <li>User A mengakses situs dari iPhone</li> <li>User B mengakses situs dari iPad</li> <li>User C mengakses situs dari laptop</li> </ul> <p>Maka situs akan memuat <em>image</em> yang sesuai dengan gadget user:</p> <ul> <li>Di gadget User A, dia akan mendapatkan <em>image</em> yang sudah dioptimalkan untuk <em>smartphone</em></li> <li>Di gadget User B, dia akan mendapatkan <em>image</em> yang sudah dioptimalkan untuk tablet</li> <li>Di gadget User C, dia akan mendapatkan <em>image</em> yang sudah dioptimalkan untuk laptop</li> </ul> <p>Demikianlah cara kerja <em>responsive images</em>.</p> <h2 id=menampilkan-responsive-images>Menampilkan <em>responsive images</em></h2> <p>Teknik ini sebenarnya sudah mulai diproposalkan untuk dijadikan HTML element, yaitu <code>&lt;picture&gt;</code> element, tetapi statusnya sampai sekarang masih <a href="http://www.w3.org/html/wg/drafts/html/master/semantics.html#the-picture-element"><em>draft</em></a> dan dukungan <a href="http://caniuse.com/#feat=picture"><em>browser</em></a> pun masih sangat minim. Jadi untuk tulisan ini saya akan menggunakan Javascript untuk membuat <em>responsive images</em>.</p> <p>Langkah pertama yang perlu dilakukan adalah mendefinisikan <em>responsive breakpoints</em> dan membuat standar penamaan <em>image</em> untuk setiap <em>breakpoint</em>. <em>Breakpoints</em> yang saya pakai di tulisan ini adalah:</p> <ul> <li>320px (smartphone), nama <em>image</em>: <code>img.jpg</code></li> <li>768px (tablet), nama <em>image</em>: <code>img-medium.jpg</code></li> <li>1024px (laptop &amp; PC), nama <em>image</em>: <code>img-large.jpg</code></li> </ul> <p>Setelah itu cara pemanggilan <em>image</em> di HTML juga diubah seperti ini:</p> <pre class="highlight html"><code><span class="nt">&lt;img</span> <span class="na">alt=</span><span class="s">"Some alt text"</span> <span class="na">src=</span><span class="s">"img.jpg"</span><span class="nt">&gt;</span>       <span class="c">&lt;!-- Cara standar --&gt;</span>
<span class="nt">&lt;img</span> <span class="na">alt=</span><span class="s">"Some alt text"</span> <span class="na">data-src=</span><span class="s">"img.jpg"</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- Responsive images --&gt;</span>
</code></pre> <p>Atribut HTML <code>src</code> diganti dengan atribut HTML5 <code>data-src</code>. Hal ini diperlukan untuk mencegah <em>browser</em> mengunduh <em>image</em> saat memuat situs. Atribut <code>data-src</code> ini dipakai untuk diakses oleh Javascript (JS).</p> <p>Nah sekarang kita membuat <em>script</em> JS berdasarkan definisi <em>breakpoints</em> dan <em>markup</em> di atas. Cara kerja <em>script</em> ini adalah sebagai berikut:</p> <ol> <li>Mendeteksi lebar <em>viewport</em> gadget</li> <li>Menentukan <em>breakpoint</em> gadget (mobile, tablet atau desktop)</li> <li>Mengambil <em>image path</em> dari <em>value</em> <code>data-src</code> dari <code>img</code></li> <li><em>Renaming image path</em> sesuai dengan <em>breakpoint</em></li> <li>Mengeset <em>image path</em> yang telah di-<em>rename</em> ke dalam atribut <code>src</code> di tag <code>img</code> agar <em>browser</em> dapat menampilkan <em>image</em>.</li> </ol> <p>Berikut <em>script</em> JS beserta penjelasannya dalam bentuk <em>comments</em> (bonus: <em>responsive background images</em>):</p> <script src="https://gist.github.com/cekerholic/f41546e7f9ef9de907f5.js"></script> <p><br/></p> <p>Sedangkan cara untuk menampilkannya adalah seperti ini:</p> <pre class="highlight javascript"><code><span class="c1">// Untuk responsive image</span>
<span class="nx">responsiveImg</span><span class="p">(</span><span class="s1">'nama selektor (class/tag html)'</span><span class="p">);</span>
<span class="c1">// Untuk responsive background</span>
<span class="nx">responsiveBg</span><span class="p">(</span><span class="s1">'nama selektor (class/tag html)'</span><span class="p">);</span>
</code></pre> <h2 id=kesimpulan>Kesimpulan</h2> <p>Teknik ini menurut saya cukup sederhana dan sangat bermanfaat untuk meningkatkan kecepatan sebuah situs, apalagi jika situs tersebut memuat banyak <em>images</em> seperti misalnya blog foto atau toko online. Apalagi jika dikombinasikan dengan teknik optimasi lainnya seperti minifikasi kode dan <em>code concatenation</em>. Dengan catatan anda harus mau direpotkan untuk menggandakan setiap <em>image</em> menjadi beberapa buah sesuai <em>viewport points</em> yang telah didefinisikan (setahu saya biasanya CMS seperti Wordpress sudah otomatis menggandakan dan me-<em>resize</em> ke beberapa ukuran setiap kali <em>user</em> mengunggah <em>image</em>).</p> <p>Demikianlah tulisan (tidak terlalu) singkat kali ini. Semoga bermanfaat :)</p> <p><br/></p> <p><em><small>Catatan kaki: Diedit pada tanggal 18 Desember 2015</small></em></p> </div> <nav class=post__nav> <div class=post__nav-item> <div class=post__nav-label>Previous Post:</div> <a class=post__nav-post href="../carpe-diem/">Carpe Diem: Warisan Robin Williams bernama Dead Poets Society</a> </div> <div class=post__nav-item> <div class=post__nav-label>Next Post:</div> <a class=post__nav-post href="../one-click-extensions-manager-ekstensi-terbaik-di-google-chrome/">One-Click Extensions Manager: Ekstensi Terbaik di Google Chrome</a> </div> </nav> <div class=post__comments><div id=disqus_thread></div> <script>
    var disqus_shortname="cekerholic";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();
</script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <a href="http://disqus.com" class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a> </div> </article> </main> <link href="../assets/css/github.css" rel=stylesheet /> <div class=colophon> &copy; 2016 Aris FM. <span> Proudly powered by <a class=colophon__link href="http://middlemanapp.com/">Middleman</a> &amp; <a class=colophon__link href="https://github.com/">Github</a> </span> </div> <script>function responsiveImg(t){window.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(t);forEach(e,function(t,e){targetImg=e.dataset.src,w>breakPoints[2]?(newImg=targetImg.substring(0,targetImg.lastIndexOf("."))+"-large"+targetImg.substring(targetImg.lastIndexOf(".")),e.setAttribute("src",newImg)):w>breakPoints[1]&&w<breakPoints[2]?(newImg=targetImg.substring(0,targetImg.lastIndexOf("."))+"-medium"+targetImg.substring(targetImg.lastIndexOf(".")),e.setAttribute("src",newImg)):e.setAttribute("src",targetImg)})})}function responsiveBg(t){window.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(t);forEach(e,function(t,e){targetBg=e.dataset.backgroundImage,w>breakPoints[2]?(newBg=targetBg.substring(0,targetBg.lastIndexOf("."))+"-large"+targetBg.substring(targetBg.lastIndexOf(".")),e.setAttribute("style","background-image:url("+newBg+")")):w>breakPoints[1]&&w<breakPoints[2]?(newBg=targetBg.substring(0,targetBg.lastIndexOf("."))+"-medium"+targetBg.substring(targetBg.lastIndexOf(".")),e.setAttribute("style","background-image:url("+newBg+")")):e.setAttribute("style","background-image:url("+targetBg+")")})})}var breakPoints=[320,768,1e3],w=window.innerWidth,forEach=function(t,e,r){for(var g=0;g<t.length;g++)e.call(r,g,t[g])};
</script> <script>
  responsiveBg(".post-cover"),responsiveImg(".post__img img");
</script> <script>
  !function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-8548592-5","auto"),ga("send","pageview");
</script> </body> </html>